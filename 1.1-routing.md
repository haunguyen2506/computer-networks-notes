# Định tuyến trong mạng máy tính

Bài viết này nhằm giúp các bạn hiểu bản chất của định tuyến
trước khi đi vào các giao thức cụ thể.

## 1. Định tuyến thực chất là bài toán gì?

Trong mạng máy tính, định tuyến (routing) là quá trình quyết định gói tin nên được chuyển tiếp tới đâu tiếp theo để cuối cùng đến đúng đích.

Thay vì bắt đầu bằng bảng biểu hay thuật toán, ta hãy nhìn bài toán này thông qua một ẩn dụ đơn giản như sau.

## 2. Bài toán

Giả sử một trường học có n tòa nhà.
Mỗi tòa có một bảo vệ với các đặc điểm sau:

- Mỗi bảo vệ chỉ biết các tòa nhà mà tòa của mình **có lối đi trực tiếp kết nối tới**.
- Không ai có cái nhìn toàn bộ trường
- Khi có học sinh hỏi đường từ tòa A sang tòa B, bảo vệ phải quyết định chỉ học sinh đi hướng nào tiếp theo

![Sơ đồ trường học](/assets/1.1-routing.png)

Trong mạng máy tính:
- Tòa nhà ↔ node
- Bảo vệ ↔ router
- Chỉ đường ↔ định tuyến

Điều quan trọng là:

> **Bảo vệ không cần biết toàn bộ lộ trình, chỉ cần biết bước tiếp theo.**

**Đây chính là bản chất của định tuyến.**

## 3. Định tuyến tĩnh

### Khi mỗi bảo vệ được phát một bản đồ

Trong định tuyến tĩnh, ban quản lý phát cho mỗi bảo vệ một bản đồ toàn trường.
Trên bản đồ đã ghi sẵn:
- Muốn đi tới tòa nào thì rẽ hướng nào
- Mọi lộ trình đều được xác định trước

### Ưu điểm

- Khi học sinh hỏi đường, bảo vệ chỉ cần nhìn bản đồ và trả lời ngay
- Không cần hỏi bảo vệ khác
- Quyết định nhanh, ổn định, dễ dự đoán

Nói ngắn gọn:

> **Định tuyến tĩnh cho quyết định nhanh vì mọi thứ đã được xác định trước.**

### Nhược điểm

- Trường có n tòa → phải phát n bản đồ
- Khi xây thêm tòa mới hoặc sửa đường:
    - Phải cập nhật bản đồ
    - Phải phát lại cho từng bảo vệ
- Nếu bản đồ lỗi thời, bảo vệ vẫn chỉ đường theo bản đồ cũ

Định tuyến tĩnh phù hợp với:
- Hệ thống nhỏ
- Ít thay đổi
- Cần kiểm soát chặt chẽ đường đi

## 4. Định tuyến động

### Khi bảo vệ được phép trao đổi thông tin

Trong định tuyến động, trường không phát bản đồ.
Thay vào đó:
- Mỗi bảo vệ được phép nói chuyện với các bảo vệ ở tòa có kết nối trực tiếp với mình.
- Họ trao đổi thông tin về:
    - Đường mới
    - Đường bị chặn
    - Lối đi thuận lợi hơn

Từ các thông tin này, mỗi bảo vệ tự xây dựng “bản đồ trong đầu” của mình.

### Ưu điểm:

- Không cần phát bản đồ cho từng người
- Khi trường thay đổi, thông tin tự lan truyền
- Hệ thống thích nghi tốt với quy mô lớn

### Nhược điểm:

- Khi học sinh hỏi đường, bảo vệ có thể cần: "Để anh hỏi bảo vệ tòa kế bên trước đã"
- Thông tin cần thời gian để lan truyền
- Có chi phí trao đổi thông tin giữa các bảo vệ

Tóm lại:
> **Định tuyến động linh hoạt hơn, nhưng quyết định không tức thì như định tuyến tĩnh.**

## 5. So sánh hai cách tiếp cận

| Tiêu chí            | Định tuyến tĩnh | Định tuyến động    |
| ------------------- | --------------- | ------------------ |
| Cách biết đường     | Bản đồ có sẵn   | Trao đổi thông tin |
| Khả năng thích nghi | Thấp            | Cao                |
| Quy mô phù hợp      | Nhỏ, ổn định    | Lớn, hay thay đổi  |
| Thời gian phản hồi  | Rất nhanh       | Có thể chậm hơn    |


## 6. Điều cần nhớ

Không cần ghi nhớ mọi thuật toán ngay từ đầu.
Điều quan trọng nhất là hiểu cách "bảo vệ" suy nghĩ:
- Mỗi router chỉ biết một phần mạng
- Router không cần biết toàn bộ đường đi
- Router chỉ quyết định bước tiếp theo nên đi đâu

Nếu nắm được điều này, việc học các giao thức định tuyến cụ thể sau này sẽ trở nên dễ dàng hơn.

---
**Bài viết kế tiếp**: [1.2. Điều gì xảy ra khi "đường đi" biến mất](1.2-interface-down.md)

>  *writing to understand*